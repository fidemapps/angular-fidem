/*! Angular fidem | Â© 2014 Fidem | License MIT */
!function(a,b,c){"use strict";var d={enableHighAccuracy:!0,timeout:3e3,maximumAge:3e4};b.module("fidem",[]).provider("fidem",function(){var a={endpoint:null,key:null};this.setApiEndpoint=function(b){return a.endpoint=b,this},this.setApiKey=function(b){return a.key=b,this};var e=this.interceptors=[];this.$get=["$http","$window","$q","$rootScope","$injector",function(f,g,h,i,j){function k(a){if(!g.navigator||!g.navigator.geolocation)return a.coordinates=null,a;var b=h.defer();return g.navigator.geolocation.getCurrentPosition(function(c){i.$apply(function(){a.coordinates={lat:c.coords.latitude,"long":c.coords.longitude},b.resolve(a)})},function(){i.$apply(function(){a.coordinates=null,b.resolve(a)})},d),b.promise}var l={};return l.log=function(c,d){var g=h.when(c),i=[].concat(e);return d?i.push(function(a){var b=h.defer();return a.coordinates=d,b.resolve(a),b.promise}):i.push(k),b.forEach(i,function(a){g=g.then(function(b){return a(b,j)})}),g.then(function(b){return f.post(a.endpoint+"/api/gamification/actions",b,{headers:{"X-Fidem-AccessApiKey":a.key}})})},l.logAction=l.log,l.createMember=function(b){return f.post(a.endpoint+"/api/members",b,{headers:{"X-Fidem-AccessApiKey":a.key}})},l.startSession=function(b){var c={};return b&&(c.member_id=b),f.post(a.endpoint+"/api/sessions",c,{headers:{"X-Fidem-AccessApiKey":a.key}})},l.assignMemberToSession=function(b,c){return f.put(a.endpoint+"/api/sessions/"+b+"/member/"+c,{},{headers:{"X-Fidem-AccessApiKey":a.key}})},l.updateMemberProfile=function(b,c){return f.put(a.endpoint+"/api/members/"+b,c,{headers:{"X-Fidem-AccessApiKey":a.key}})},l.updateMemberProfilePicture=function(b,d){var e=new FormData;return e.append("__v",b.__v),e.append("file",d),f.put(a.endpoint+"/api/members/"+b.id+"/picture",e,{headers:{"X-Fidem-AccessApiKey":a.key,"Content-Type":c}})},l.getMemberProfile=function(b){return f.get(a.endpoint+"/api/members/"+b,{headers:{"X-Fidem-AccessApiKey":a.key}})},l.getContests=function(b){var c={};return b&&(c.memberId=b),f.get(a.endpoint+"/api/contests",{params:c,headers:{"X-Fidem-AccessApiKey":a.key}})},l.addLinkToMember=function(b,c){return f.post(a.endpoint+"/api/members/"+b+"/links",c,{headers:{"X-Fidem-AccessApiKey":a.key}})},l.linkMembers=function(b,c,d){return f.put(a.endpoint+"/api/members/"+b+"/link/"+c,{link_reason:d},{headers:{"X-Fidem-AccessApiKey":a.key}})},l.getMenus=function(b){var c={};return b&&(c.member_id=b),f.get(a.endpoint+"/api/content/menus",{params:c,headers:{"X-Fidem-AccessApiKey":a.key}})},l.getPage=function(b,c){var d={};return c&&(d.member_id=c),f.get(a.endpoint+"/api/content/pages/"+b,{params:d,headers:{"X-Fidem-AccessApiKey":a.key}})},l.getNewsList=function(b,c){var d={};return c&&(d.member_id=c),f.get(a.endpoint+"/api/content/newslists/"+b,{params:d,headers:{"X-Fidem-AccessApiKey":a.key}})},l.getMemberChallenges=function(b){return f.get(a.endpoint+"/api/members/"+b+"/challenges",{headers:{"X-Fidem-AccessApiKey":a.key}})},l.getMemberChallengesDone=function(b){return f.get(a.endpoint+"/api/members/"+b+"/challenges/done",{headers:{"X-Fidem-AccessApiKey":a.key}})},l.getMemberChallengesTodo=function(b){return f.get(a.endpoint+"/api/members/"+b+"/challenges/todo",{headers:{"X-Fidem-AccessApiKey":a.key}})},l.challengeTakePicture=function(b,d){var e=new FormData;return e.append("file",d),f.put(a.endpoint+"/api/challenges/"+b+"/picture",e,{headers:{"X-Fidem-AccessApiKey":a.key,"Content-Type":c}})},l}]})}(window,window.angular);
//# sourceMappingURL=angular-fidem.min.js.map